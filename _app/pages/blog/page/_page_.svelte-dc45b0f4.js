import{S as z,i as F,s as G,e as E,k as j,V as J,c as B,d as c,m as D,a as S,b as $,H as d,g as P,o as q,p as K,q as H,n as N,t as k,h as b,E as I,w as M,x as O,y as C,j as L,B as R}from"../../../chunks/index-8e860b16.js";import{f as Q}from"../../../chunks/fetchPosts-a6e0c503.js";import{p as V,s as W}from"../../../chunks/config-633fefe8.js";import{a as U,P as X}from"../../../chunks/Pagination-c2f167b2.js";import"../../../chunks/preload-helper-e4860ae8.js";function Y(r){let s,a,m,i,n,l,p,_;return{c(){s=E("h1"),a=k("Oops!"),m=j(),i=E("p"),n=k("Sorry, no posts to show here."),l=j(),p=E("a"),_=k("Back to blog"),this.h()},l(e){s=B(e,"H1",{});var h=S(s);a=b(h,"Oops!"),h.forEach(c),m=D(e),i=B(e,"P",{});var o=S(i);n=b(o,"Sorry, no posts to show here."),o.forEach(c),l=D(e),p=B(e,"A",{href:!0});var u=S(p);_=b(u,"Back to blog"),u.forEach(c),this.h()},h(){$(p,"href","/blog")},m(e,h){P(e,s,h),d(s,a),P(e,m,h),P(e,i,h),d(i,n),P(e,l,h),P(e,p,h),d(p,_)},p:I,i:I,o:I,d(e){e&&c(s),e&&c(m),e&&c(i),e&&c(l),e&&c(p)}}}function Z(r){let s,a,m,i,n,l,p,_,e,h,o,u,g,v,w;return e=new U({props:{currentPage:r[0],totalPosts:r[1]}}),u=new X({props:{posts:r[2]}}),v=new U({props:{currentPage:r[0],totalPosts:r[1]}}),{c(){s=E("h1"),a=k("Posts "),m=k(r[4]),i=k("\u2013"),n=k(r[3]),l=k(" of "),p=k(r[1]),_=j(),M(e.$$.fragment),h=j(),o=E("div"),M(u.$$.fragment),g=j(),M(v.$$.fragment),this.h()},l(t){s=B(t,"H1",{});var f=S(s);a=b(f,"Posts "),m=b(f,r[4]),i=b(f,"\u2013"),n=b(f,r[3]),l=b(f," of "),p=b(f,r[1]),f.forEach(c),_=D(t),O(e.$$.fragment,t),h=D(t),o=B(t,"DIV",{class:!0});var y=S(o);O(u.$$.fragment,y),y.forEach(c),g=D(t),O(v.$$.fragment,t),this.h()},h(){$(o,"class","container")},m(t,f){P(t,s,f),d(s,a),d(s,m),d(s,i),d(s,n),d(s,l),d(s,p),P(t,_,f),C(e,t,f),P(t,h,f),P(t,o,f),C(u,o,null),P(t,g,f),C(v,t,f),w=!0},p(t,f){(!w||f&16)&&L(m,t[4]),(!w||f&8)&&L(n,t[3]),(!w||f&2)&&L(p,t[1]);const y={};f&1&&(y.currentPage=t[0]),f&2&&(y.totalPosts=t[1]),e.$set(y);const T={};f&4&&(T.posts=t[2]),u.$set(T);const A={};f&1&&(A.currentPage=t[0]),f&2&&(A.totalPosts=t[1]),v.$set(A)},i(t){w||(H(e.$$.fragment,t),H(u.$$.fragment,t),H(v.$$.fragment,t),w=!0)},o(t){q(e.$$.fragment,t),q(u.$$.fragment,t),q(v.$$.fragment,t),w=!1},d(t){t&&c(s),t&&c(_),R(e,t),t&&c(h),t&&c(o),R(u),t&&c(g),R(v,t)}}}function x(r){let s,a,m,i,n,l,p;document.title=s="Blog - "+r[0];const _=[Z,Y],e=[];function h(o,u){return o[2].length?0:1}return n=h(r),l=e[n]=_[n](r),{c(){a=E("meta"),m=j(),i=E("div"),l.c(),this.h()},l(o){const u=J('[data-svelte="svelte-5j23ac"]',document.head);a=B(u,"META",{"data-key":!0,name:!0,content:!0}),u.forEach(c),m=D(o),i=B(o,"DIV",{class:!0});var g=S(i);l.l(g),g.forEach(c),this.h()},h(){$(a,"data-key","description"),$(a,"name","description"),$(a,"content",W),$(i,"class","container")},m(o,u){d(document.head,a),P(o,m,u),P(o,i,u),e[n].m(i,null),p=!0},p(o,[u]){(!p||u&1)&&s!==(s="Blog - "+o[0])&&(document.title=s);let g=n;n=h(o),n===g?e[n].p(o,u):(N(),q(e[g],1,1,()=>{e[g]=null}),K(),l=e[n],l?l.p(o,u):(l=e[n]=_[n](o),l.c()),H(l,1),l.m(i,null))},i(o){p||(H(l),p=!0)},o(o){q(l),p=!1},d(o){c(a),o&&c(m),o&&c(i),e[n].d()}}}const lt=async({fetch:r,params:s})=>{try{const a=s.page?s.page:1;if(a<=1)return{status:301,redirect:"/blog"};let m=a*V-V;const i=await r("/api/posts/count.json"),{total:n}=await i.json(),{posts:l}=await Q({offset:m,page:a});return{status:200,props:{posts:l,page:a,totalPosts:n}}}catch(a){return{status:404,error:a.message}}};function tt(r,s,a){let m,i,{page:n}=s,{totalPosts:l}=s,{posts:p=[]}=s;return r.$$set=_=>{"page"in _&&a(0,n=_.page),"totalPosts"in _&&a(1,l=_.totalPosts),"posts"in _&&a(2,p=_.posts)},r.$$.update=()=>{r.$$.dirty&1&&a(4,m=n*V-(V-1)||1),r.$$.dirty&3&&a(3,i=Math.min(n*V,l))},[n,l,p,i,m]}class rt extends z{constructor(s){super();F(this,s,tt,x,G,{page:0,totalPosts:1,posts:2})}}export{rt as default,lt as load};
